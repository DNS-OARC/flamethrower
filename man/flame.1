.\" Automatically generated by Pandoc 2.7.3
.\"
.TH "FLAME" "1" "Februrary 6, 2019" "0.9" "Flamethrower"
.hy
.SH NAME
.PP
flame \[en] DNS performance and functional testing utility
.SH SYNOPSIS
.PP
flame [\f[I]options\f[R]] \f[I]target\f[R] [\f[I]generator-options\f[R]]
.PP
flame --help
.PP
flame --version
.SH DESCRIPTION
.PP
Flamethrower is a small, fast, configurable tool for functional testing,
benchmarking, and stress testing DNS servers and networks.
It supports IPv4, IPv6, UDP and TCP, and has a modular system for
generating queries used in the tests.
.PP
It was built as an alternative to
dnsperf (https://github.com/DNS-OARC/dnsperf) and many of the command
line options are compatible.
.SS Target
.PP
Target can be either an IP address or host name which will be resolved
first.
.SS Options
.TP
.B -b \f[I]BIND_IP\f[R]
IP address to bind to.
Default is 0.0.0.0 for inet or ::0 for inet6.
.TP
.B -q \f[I]QCOUNT\f[R]
Number of queries to send every \f[I]DELAY_MS\f[R] interval.
Default is 10.
.TP
.B -c \f[I]TCOUNT\f[R]
Number of concurrent traffic generators per process.
Default is 10.
.TP
.B -p \f[I]PORT\f[R]
Which port to flame.
Default is 53.
.TP
.B -d \f[I]DELAY_MS\f[R]
Delay between each traffic generator\[cq]s run in milliseconds.
Default is 1.
.TP
.B -r \f[I]RECORD\f[R]
The base record to use as the query for generators.
Default is test.com.
.TP
.B -T \f[I]QTYPE\f[R]
The query type to use for generators.
Default is A.
.TP
.B -o \f[I]FILE\f[R]
Metrics output file in JSON format.
.TP
.B -l \f[I]LIMIT_SECS\f[R]
Traffic generation limit in seconds.
0 for unlimited.
Default is 0.
.TP
.B -t \f[I]TIMEOUT\f[R]
Query timeout in seconds.
Default is 3.
.TP
.B -F ( inet | inet6 )
Internet family.
Default is inet.
.TP
.B -f \f[I]FILE\f[R]
Read records from a file, one per row, QNAME and QTYPE.
Used with the file generator.
.TP
.B -n \f[I]LOOP\f[R]
Number of loops in the record list, 0 is unlimited.
Default is 1.
.TP
.B -R
Randomize the query list before sending.
Default is false.
.TP
.B -P ( udp | tcp | tcptls | https )
Protocol to use.
Default is udp.
.TP
.B -M ( GET | POST )
HTTP method to use for DNS over HTTPS.
Default is GET.
.TP
.B -Q \f[I]QPS\f[R]
Rate limit to a maximum queries per second, 0 is unlimited.
Default is 0.
.TP
.B -g \f[I]GENERATOR\f[R]
Query generator to use.
The generators and their options are described in a separate section.
Default is static.
.TP
.B -v \f[I]VERBOSITY\f[R]
Output verbosity, 0 is silent.
Default is 1.
.TP
.B --dnssec
Send queries with DNSSEC OK flag set.
Default is false.
.TP
.B --class \f[I]CLASS\f[R]
Send queries with given DNS class.
Default is IN.
.TP
.B --qps-flow
Change rate limit over time, format: QPS,MS;QPS,MS;\&...
.SH Generators
.PP
Flamethrower uses a modular system for generating queries.
Each module may include its own list of configuration options which can
be set via \f[I]KEY\f[R]=\f[I]VALUE\f[R] pairs on the command line via
\f[I]generator-options\f[R].
.SS static
.PP
The generator sends the same query for a QNAME and QTYPE specified via
the \f[I]-r\f[R] and \f[I]-t\f[R] options.
It doesn\[cq]t use generator options.
.SS file
.PP
The generator reads dnsperf-compatible input file containing QNAME and
QTYPE pairs on individual lines.
The name and type is separated by a space.
The input file is specified via the \f[I]-f\f[R] option.
File generator doesn\[cq]t use generator options.
.SS numberqname
.PP
The generator sends queries to one-label subdomain with a number for a
record specified with -\f[I]r\f[R].
The generator uses following generator options:
.IP \[bu] 2
\f[I]low\f[R] - Lowest numeric value to write into the label.
Default is 0.
.IP \[bu] 2
\f[I]high\f[R] - Highest number value to write into the label.
Default is 100000.
.SS randompkt
.PP
The generator sends random chunks of data and uses following generator
options:
.IP \[bu] 2
\f[I]count\f[R] - number of chunks (packets) to generate.
Default is 1000.
.IP \[bu] 2
\f[I]size\f[R] - maximal size of the chunk in bytes.
Default is 600.
.SS randomqname
.PP
The generator sends queries to random subdomains of the record specified
with \f[I]-r\f[R].
The subdomains may contain binary (non-printable characters) including
zero byte.
The following generator options are available:
.IP \[bu] 2
\f[I]count\f[R] - number of queries to generate.
Default is 100.
.IP \[bu] 2
\f[I]size\f[R] - maximum length of the added label(s).
Default is 255.
.SS randomlabel
.PP
The generator sends queries to random subdomains of the record specified
with \f[I]-r\f[R].
The subdomains may contain only characters valid in a DNS names.
The following generator options are available:
.IP \[bu] 2
\f[I]count\f[R] - number of queries to generate.
Default is 1000.
.IP \[bu] 2
\f[I]lblsize\f[R] - maximum length of a single added label.
Default is 10.
.IP \[bu] 2
\f[I]lblcount\f[R] - maximum number of labels to add.
Default is 5.
.SH EXAMPLES
.PP
Flame localhost over IPv4 on UDP port 53, use default static generator
sending test.com/A queries, no QPS limit, terminate after 10 seconds:
.IP
.nf
\f[C]
$ flame -l 10 localhost
\f[R]
.fi
.PP
Flame target.example.test over IPv6 on TCP port 5300 with default
generator and no QPS limit:
.IP
.nf
\f[C]
$ flame -p 5300 -P tcp -F inet6 target.example.test
\f[R]
.fi
.PP
Flame target.example.test over IPv4 on UDP port 53 with 10 q/s limit,
send AAAA type queries for random one-label subdomains of example.test,
limit the query speed to 10 q/s, terminate after 1000 queries:
.IP
.nf
\f[C]
$ flame -Q 10 -r example.test -t AAAA -g randomlabel target.example.test lblsize=10 lblcount=1 count=1000
\f[R]
.fi
.SH AUTHORS
.PP
NS1 (https://ns1.com)
.SH BUGS
.PP
Flamethrower at GitHub (https://github.com/DNS-OARC/flamethrower/issues)
.SH COPYRIGHT
.PP
Copyright 2019, NSONE, Inc.
